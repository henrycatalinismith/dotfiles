# Enable RGB mode and system clipboard.
set -as terminal-features ",*:RGB:clipboard"

# Include --login flag so that every zsh session picks up .zprofile and .zshrc.
# This is kind of a mess but has been hard to get into a state where it both
# feels tidy and actually works.
set -g default-command "zsh --login"

# This defaults to 2000 which is tiny. I've done some GitHub searching to
# figure out what range is normal, and this value seems reasonable.
# https://github.com/search?l=Shell&q=tmux+set+history-limit&type=Code
set -g history-limit 65536

# The mouse can be pretty useful for selecting & resizing panes.
set -g mouse on

# Ctrl+A is easier to press than Ctrl+B. I honestly don't know how Ctrl+B
# pressers manage to avoid RSIs.
set -g prefix C-a

# Don't kill panes when a shell is exited with Ctrl+D. This forces the use of
# kill.sh to handle killing panes and avoids annoying unwanted detaches.
set -g remain-on-exit on

# tmux's list-sessions command represents sessions and windows on a 2D plane
# with sessions on the y axis and windows on the x axis. This has accidentally
# trained me to think of them that way and that's the reason for these arrow
# key bindings: up + down for sessions and left + right for windows.
bind Up run -bC "switch-client -p"
bind Down run -bC "switch-client -n"
bind Left run -bC "prev"
bind Right run -bC "next"

bind "q" run -bC "detach-client"
bind "w" run -b "~/.config/tmux/kill.sh '#{session_id}' '#{window_id}' '#{pane_id}'"
bind "r" source ~/.config/tmux/tmux.conf
bind "t" run -bC "new-window -c '#{pane_current_path}'"

# Binding the Vim arrow keys for pane selection is what the tmux-pain-control
# plugin does and I like it.
# https://github.com/tmux-plugins/tmux-pain-control
bind "h" select-pane -L
bind "j" select-pane -D
bind "k" select-pane -U
bind "l" select-pane -R

bind "|" split-window -h -c "#{pane_current_path}"
bind "-" split-window -v -c "#{pane_current_path}"

bind "n" run -b ~/.config/tmux/new-session.sh

set -g mode-style bg=magenta,fg=white
set -g status-bg "#002b36"
set -g window-status-current-format "#[bg=#268bd2,fg=#002b36]#[fg=#eee8d5,bg=#268bd2,bold] #{=8:#{p8:window_name}} #[fg=#268bd2,bg=#002b36,nobold]"
set -g window-status-format "#[bg=#28515d,fg=#002b36]#[fg=#eee8d5,bg=#28515d,bold] #{=8:#{p8:window_name}} #[fg=#28515d,bg=#002b36,nobold]"
set -g status-left "#{?pane_in_mode,#[fg=#eee8d5#,bg=#adff2f],#[fg=#eee8d5#,bg=#d33682]} #{session_name} #{?pane_in_mode,#[bg=#002b36#,fg=#adff2f],#[bg=#002b36#,fg=#d33682]} "
set -g status-left-length 16
